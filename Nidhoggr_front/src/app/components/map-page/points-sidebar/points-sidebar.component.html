<aside class="sidebar">
  <div class="search-box">
    <input 
      type="text" 
      placeholder="Rechercher un lieu..." 
      [(ngModel)]="searchQuery"
      (ngModelChange)="onSearch()"
      (keyup.enter)="searchResults.length > 0 && goToLocation(searchResults[0])"
    />
  </div>
  
  <!-- Search results autocomplete -->
  <div class="search-results" *ngIf="searchResults.length > 0">
    <div 
      *ngFor="let result of searchResults" 
      class="result-item"
      (click)="goToLocation(result)"
    >
      {{ result.display_name }}
    </div>
  </div>
  
  <!-- Event selector autocomplete -->
  <div class="event-selector">
    <p-autoComplete
      [(ngModel)]="selectedEventName"
      [suggestions]="filteredEvents"
      (completeMethod)="filterEvents($event)"
      (onSelect)="onEventSelect($event)"
      placeholder="Sélectionner un événement..."
      [dropdown]="true"
      [forceSelection]="true"
      [showEmptyMessage]="true"
      emptyMessage="Aucun événement trouvé"
    />
  </div>

  <!-- Points list component -->
  <app-points-list
    [points$]="points$"
    [selectedPointUuid]="selectedPointUuid"
    [isLoading]="isLoading"
    [errorMessage]="errorMessage"
    [emptyMessage]="emptyMessage"
    (pointClick)="onPointClick($event)"
    (pointsReordered)="onPointsReordered($event)"
  />
  
  <div class="bottom-buttons">
    <button class="equipment-btn" (click)="openEquipmentManager()">Créer un évènement</button>
    <button class="export-btn" (click)="openExport()">Exporter</button>
    <button class="import-btn" (click)="openImport()">Importer</button>
  </div>
</aside>

@if (showImportPopup) {
  <app-import-popup (close)="closeImport()"></app-import-popup>
}
@if (showExportPopup) {
  <app-export-popup (close)="closeExport()"></app-export-popup>
}
