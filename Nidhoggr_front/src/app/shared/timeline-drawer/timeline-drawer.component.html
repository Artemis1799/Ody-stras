<div class="timeline-container" *ngIf="isVisible">
  <div class="timeline-dialog">
    <button class="timeline-close" (click)="close()">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="20"
        height="20"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </button>

    <!--    <div class="dialog-header">
      <div class="header-icon">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="28"
          height="28"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="16" y1="2" x2="16" y2="6"></line>
          <line x1="8" y1="2" x2="8" y2="6"></line>
          <line x1="3" y1="10" x2="21" y2="10"></line>
          <line x1="8" y1="14" x2="8" y2="18"></line>
          <line x1="12" y1="14" x2="12" y2="18"></line>
          <line x1="16" y1="14" x2="16" y2="18"></line>
        </svg>
      </div>
            <div class="header-text">
        <h4>Planning d'Installation</h4>
        <p>{{ getTimelineLabel() }}</p>
      </div>
    </div>-->

    <div class="timeline-content">
      <div class="timeline-wrapper" *ngIf="timelineItems.length > 0; else noData">
        <!-- Axe temporel avec graduations -->
        <div class="timeline-axis-container">
          <!-- Ligne de base avec graduations -->
          <!--  <div class="timeline-axis">
            <div class="axis-start">{{ formatDate(minDate) }}</div>
            <div class="axis-end">{{ formatDate(maxDate) }}</div>
          </div>-->

          <!-- Graduations -->
          <div class="timeline-graduations">
            <div
              class="graduation"
              *ngFor="let grad of graduations"
              [style.left.%]="grad.position"
              [title]="grad.label"
            >
              <div class="graduation-tick"></div>
              <div class="graduation-label">{{ grad.label }}</div>
            </div>
          </div>
        </div>

        <!-- Barres de la frise -->
        <div class="timeline-items">
          <div class="timeline-item" *ngFor="let item of timelineItems">
            <div class="item-label">
              <span class="item-title">{{ item.title }}</span>
            </div>

            <div class="item-bar-container" (mouseleave)="onPointHoverEnd()">
              <div class="item-bar-background"></div>

              <!-- Barre de p√©riode d'installation -->
              <div
                *ngIf="item.start && item.end"
                class="item-bar"
                [style.left.%]="getDatePosition(item.start)"
                [style.width.%]="getDuration(item.start, item.end)"
                (mouseenter)="onPointHover(item.id, $event)"
                (mousemove)="onPointMouseMove($event)"
              ></div>
            </div>
          </div>
        </div>

        <!-- Tooltip dynamique -->
        <div
          class="dynamic-tooltip"
          *ngIf="tooltipVisible && tooltipItem"
          [style.left.px]="tooltipX"
          [style.top.px]="tooltipY"
        >
          <div class="tooltip-title">{{ tooltipItem.title }}</div>
          <div class="tooltip-dates">
            <div class="tooltip-date">
              <span class="date-label">üìå Pos√©:</span>
              <span class="date-value">{{ formatDateTime(tooltipItem.start) }}</span>
            </div>
            <div class="tooltip-date">
              <span class="date-label">üóëÔ∏è D√©pos√©:</span>
              <span class="date-value">{{ formatDateTime(tooltipItem.end) }}</span>
            </div>
          </div>
        </div>
      </div>

      <ng-template #noData>
        <div class="no-data">
          <p>Aucun point avec dates d'installation et de d√©pose disponible.</p>
        </div>
      </ng-template>
    </div>
  </div>
</div>
