<div class="export-overlay">
	<div class="export-dialog">
		<button class="export-close" (click)="close.emit()">‚úï</button>
		
		<!-- Vue principale: choix du format -->
		@if (!showQRCode) {
			<div>
				<h4>Exporter les donn√©es de l'√©v√®nement</h4>
				<p>S√©lectionnez le format d'export souhait√© pour t√©l√©charger vos donn√©es.</p>
				<div class="export-actions">
					<p-button 
						label="Excel" 
						icon="pi pi-file-excel" 
						severity="success"
						size="large"
						(onClick)="exportExcel()"
						[outlined]="true"
					></p-button>
					<p-button 
						label="PDF" 
						icon="pi pi-file-pdf" 
						severity="danger"
						size="large"
						(onClick)="exportPDF()"
						[outlined]="true"
					></p-button>
					<p-button 
						label="Vers T√©l√©phone" 
						icon="pi pi-mobile" 
						severity="info"
						size="large"
						(onClick)="exportViaQRCode()"
						[outlined]="true"
					></p-button>
				</div>
			</div>
		}

		<!-- Vue QR Code -->
		@if (showQRCode) {
			<div class="qr-export-view">
				<h4>üì± Export vers T√©l√©phone</h4>
				<p>{{ exportStatus }}</p>
				
				@if (qrCodeDataURL) {
					<div class="qr-code-container">
						<img [src]="qrCodeDataURL" alt="QR Code" class="qr-code-image">
					</div>
				}

				<div class="qr-instructions">
					<p><strong>Instructions :</strong></p>
					<ol>
						<li>Scannez ce QR code avec votre t√©l√©phone</li>
						<li>Les donn√©es seront automatiquement transf√©r√©es</li>
						<li>Cette fen√™tre se fermera automatiquement</li>
					</ol>
				</div>

				<div class="export-actions">
					<p-button 
						label="Annuler" 
						icon="pi pi-times" 
						severity="secondary"
						(onClick)="closeQRCodeExport()"
						[outlined]="true"
					></p-button>
				</div>
			</div>
		}
	</div>
</div>
