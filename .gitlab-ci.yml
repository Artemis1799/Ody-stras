stages:
  - install
  - prisma
  - test

install_job:
  stage: install
  script:
    - npm ci

prisma_job:
  stage: prisma
  script:
    - npx prisma generate
    - npx prisma migrate deploy

test_job:
  stage: test
  script:
    - npm test
  artifacts:
  reports:
    junit: test-results.xml
  
